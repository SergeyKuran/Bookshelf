{"mappings":"wQAAA,IAAAA,EAAAC,EAAA,S,8EAMMC,EAAaC,SAASC,cAAc,sBACpCC,EAA0BF,SAASC,cAAc,mBACjDE,EAAgBH,SAASC,cAAc,kBACvCG,EAAYJ,SAASC,cAAc,eAGrCI,EAAWC,EAAAC,QAAmBC,KAAK,SACjCC,EAAgBC,OAAOC,WAAa,IAAM,EAAI,EAE9CC,EAAY,IAAI,EAAAC,EAAAC,QACpBd,SAASC,cAAc,UACvB,kB,SAMac,I,OAAAA,EAAfC,EAAAnB,EAAA,CAAAmB,EAAAC,GAAAC,MAAA,SAAAC,EAA2BC,G,IAIjBC,EACAC,EAMAC,E,sEAVJH,EAAKI,OAAM,C,uBACbC,IAEMJ,EAAcD,EAAKM,MAAM,EAAGjB,G,SACXY,EAAYM,IAAG,W,MAACX,EAAAnB,EAAA,CAAAmB,EAAAC,GAAAC,MAAA,SAAAU,EAAMC,G,IACrCC,E,kFAAaC,EAAAxB,QAAMyB,IACvB,6CAAgDC,OAAHJ,I,cADzCC,EAAII,EAAAC,K,SAGGL,EAAKV,K,mGAJyBS,G,gCAAP,I,cAAhCP,EAAQc,EAAAD,K,SAMWE,QAAQC,WAAWhB,G,OAAtCC,EAAYa,EAAAD,KAAqCR,KAAI,SAAAY,G,OAAMA,EAAGC,K,IACpEzC,EAAW0C,WAAY,EAAAC,EAAAnC,SAAoBgB,GAC3CxB,EAAW4C,iBAAiB,QAASC,G,wBAErCC,I,QAEFjC,EAAUkC,O,4CAjBG/B,EAAWgC,MAAAC,KAAAC,U,CAoB1B,SAASJ,IACP9C,EAAW0C,UAAY,GACvBvC,EAAwBgD,UAAUC,IAAI,YACtChD,EAAciD,MAAMC,aAAe,O,CAGrC,SAAS5B,IACPvB,EAAwBgD,UAAUI,OAAO,YACzCnD,EAAciD,MAAMC,aAAe,GACnCE,oBAAoB,QAASX,E,CAG/B,SAASA,EAAcY,GACrB,IAAMC,EAAaD,EAAME,OAAOC,QAAQ,oBAClCC,EAASJ,EAAME,OAAOC,QAAQ,qBAEpC,GAAKF,EAAL,CAIA,IAAMI,GAAW,EAAAC,EAAAC,cAAa1D,EAAUI,GAQxC,GANAJ,EAAWA,EAAS2D,QAAO,SAAAC,G,OAAQA,IAASL,EAAOM,QAAQrC,E,IAE3DvB,EAAAC,QAAmB4D,KAxDI,QAwDmB9D,GAE1CoD,EAAWL,MAAMgB,QAAU,OAEtB/D,EAASmB,OAAd,CAIE,IAAM6C,EAAcP,EAAAQ,WAAWC,iBAEzBC,EAAsD,IAArCX,EAASQ,EAAc,GAAG7C,OAAe,EAAI,EAEjD,IAAnBgD,GAAuBV,EAAAQ,WAAWG,MAAMpE,EAASmB,QAEjDsC,EAAAQ,WAAWI,WAAWL,EAAcG,GAEpCnE,EAASmB,QAAUf,GACfL,EAAU8C,UAAUC,IAAI,W,MAZ5BN,GAZA,C,CAzCJjC,EAAU+D,O,SAIiBvD,GAAZL,EAAWgC,MAAAC,KAAAC,U,CAF1B2B,CAAYvE,E","sources":["src/js/shoplist.js"],"sourcesContent":["import localStoragemethod from '../js/storage-methods';\nimport axios from 'axios';\nimport { pagination, sliceOnGroup } from './pagination';\nimport markupBooksInBasket from './markupBooksInBasket';\nimport { Loader } from './loaderClass';\n\nconst bookListEl = document.querySelector('.shopinlist__cards');\nconst notificationContainerEl = document.querySelector('.shoplist__info');\nconst shoppingTitle = document.querySelector('.basket__title');\nconst container = document.querySelector('#pagination');\n\nconst LOCALSTORAGE_KEY = 'books';\nlet bookList = localStoragemethod.load('books');\nconst ITEM_PER_PAGE = window.innerWidth < 768 ? 4 : 3;\n\nconst preLoader = new Loader(\n  document.querySelector('header'),\n  'preloader-page'\n);\npreLoader.show();\n\nrenderBooks(bookList);\n\nasync function renderBooks(data) {\n  if (data.length) {\n    removeEmptyNotificationContainer();\n\n    const currentData = data.slice(0, ITEM_PER_PAGE);\n    const arrBooks = await currentData.map(async id => {\n      const data = await axios.get(\n        `https://books-backend.p.goit.global/books/${id}`\n      );\n      return await data.data;\n    });\n    const arrResult = (await Promise.allSettled(arrBooks)).map(el => el.value);\n    bookListEl.innerHTML = markupBooksInBasket(arrResult);\n    bookListEl.addEventListener('click', onBasketClick);\n  } else {\n    pasteEmptyNotificationContainer();\n  }\n  preLoader.hide();\n}\n\nfunction pasteEmptyNotificationContainer() {\n  bookListEl.innerHTML = '';\n  notificationContainerEl.classList.add('js-empty');\n  shoppingTitle.style.marginBottom = '140px';\n}\n\nfunction removeEmptyNotificationContainer() {\n  notificationContainerEl.classList.remove('js-empty');\n  shoppingTitle.style.marginBottom = '';\n  removeEventListener('click', onBasketClick);\n}\n\nfunction onBasketClick(event) {\n  const bntCloseEl = event.target.closest('.shopinlist__btn');\n  const cardEl = event.target.closest('.shopinlist__card');\n\n  if (!bntCloseEl) {\n    return;\n  }\n\n  const arrSlice = sliceOnGroup(bookList, ITEM_PER_PAGE);\n\n  bookList = bookList.filter(item => item !== cardEl.dataset.id);\n\n  localStoragemethod.save(LOCALSTORAGE_KEY, bookList);\n\n  bntCloseEl.style.display = 'none';\n\n  if (!bookList.length) {\n    pasteEmptyNotificationContainer();\n    return;\n  } else {\n    const currentPage = pagination.getCurrentPage();\n\n    const currentPageNum = arrSlice[currentPage - 1].length === 1 ? 1 : 0;\n\n    currentPageNum === 1 ? pagination.reset(bookList.length) : null;\n\n    pagination.movePageTo(currentPage - currentPageNum);\n\n    bookList.length <= ITEM_PER_PAGE\n      ? container.classList.add('disabled')\n      : null;\n  }\n}\n"],"names":["$bpxeT","parcelRequire","$797f8c37052cbd02$var$bookListEl","document","querySelector","$797f8c37052cbd02$var$notificationContainerEl","$797f8c37052cbd02$var$shoppingTitle","$797f8c37052cbd02$var$container","$797f8c37052cbd02$var$bookList","$4op18","default","load","$797f8c37052cbd02$var$ITEM_PER_PAGE","window","innerWidth","$797f8c37052cbd02$var$preLoader","$7JdID","Loader","$797f8c37052cbd02$var$_renderBooks","$parcel$interopDefault","$2TvXO","mark","_callee1","data","currentData","arrBooks","arrResult","length","$797f8c37052cbd02$var$removeEmptyNotificationContainer","slice","map","_callee","id","_$data","$dIxxU","get","concat","_ctx","sent","_ctx1","Promise","allSettled","el","value","innerHTML","$j6slc","addEventListener","$797f8c37052cbd02$var$onBasketClick","$797f8c37052cbd02$var$pasteEmptyNotificationContainer","hide","apply","this","arguments","classList","add","style","marginBottom","remove","removeEventListener","event","bntCloseEl","target","closest","cardEl","arrSlice","$jcFG7","sliceOnGroup","filter","item","dataset","save","display","currentPage","pagination","getCurrentPage","currentPageNum","reset","movePageTo","show","$797f8c37052cbd02$var$renderBooks"],"version":3,"file":"shoplist.7a93a238.js.map"}