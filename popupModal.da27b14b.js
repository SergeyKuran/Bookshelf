function e(e,t,o,n){Object.defineProperty(e,t,{get:o,set:n,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var o=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequired7c6;o.register("100X1",(function(e,t){var n=o("2OfAl"),s=o("bja6l");const r=new(0,n.AxiosApi),i="books",a=document.querySelector("html"),c=document.createElement("div");c.classList.add("backdrop");const l=document.querySelector(".js-all-books");let p=JSON.parse(localStorage.getItem(i))||[],u=null;const d=()=>{try{return JSON.parse(localStorage.getItem(i))??[]}catch(e){return console.error(e),[]}},g=e=>{"Escape"===e.key&&f()};function m(e){e.target&&f()}function h(e){e.target.classList.contains("backdrop")&&f()}function b(e){return d().includes(e)}function f(){document.querySelector(".pop-up").classList.add("pop-up__close");const e=document.querySelector(".backdrop");e.classList.add("backdrop__close"),setTimeout((()=>{e.classList.remove("backdrop__close"),document.body.removeChild(c),a.classList.remove("scrollable"),document.removeEventListener("keydown",g)}),200)}l.addEventListener("click",(async function(e){if(!e.target.parentElement.classList.contains("js-book"))return;u=e.target.parentElement.dataset.id,document.addEventListener("keydown",g);let t=b(u)?"REMOVE FROM THE SHOPPING LIST":"ADD TO SHOPPING LIST";try{const e=(await r.getShops(u)).data;c.innerHTML=(0,s.createPopupCard)(e,t);let o=c.querySelector(".pop-up__congratulations");b(u)?o.classList.remove("hidden"):o.classList.add("hidden"),document.body.appendChild(c),a.classList.add("scrollable");c.querySelector(".js-add-storage").addEventListener("click",(e=>{!function(e,t){t.target.blur();const o=c.querySelector(".pop-up__congratulations");if(b(e))return o.classList.add("hidden"),n=e,p=d().filter((e=>e!==n)),localStorage.setItem(i,JSON.stringify(p)),void(t.target.textContent="ADD TO SHOPPING LIST");o.classList.remove("hidden"),p.push(e),localStorage.setItem(i,JSON.stringify(p)),t.target.textContent="REMOVE FROM THE SHOPPING LIST";var n}(u,e)}));c.querySelector(".js-popup-close").addEventListener("click",m),c.addEventListener("click",h)}catch(e){console.log(e)}}))})),o.register("2OfAl",(function(t,n){e(t.exports,"AxiosApi",(function(){return r}));var s=o("2shzp");class r{#e="https://books-backend.p.goit.global/books/";async getShops(e){const t=`${this.#e}${e}`;return await s.default.get(t)}}})),o.register("bja6l",(function(t,n){e(t.exports,"createPopupCard",(function(){return i}));var s=o("a1pCD");const r=["Amazon","Apple Books","Bookshop"];function i({author:e,book_image:t,title:n,buy_links:i,description:a},c){return`\n      <div class="pop-up scrollable">\n        <div class="pop-up__book-info">\n          <img class="pop-up__img" src="${t}" alt="${n}">\n          <div class="pop-up__description">\n            <h2 class="pop-up__book-name">${n}</h2>\n            <h2 class="pop-up__book-author">${e}</h2>\n            <p class="pop-up__review">${a||"Description"}</p>\n            <ul class="stores-list">${l=i,r.map((e=>l.find((({name:t})=>t===e)))).map((({name:e,url:t},o)=>`\n      <li class="stores-list__item">\n        <a href="${t}" target="_blank" rel="noopener noreferrer nofollow">\n          <img\n            srcset="${s.bookShopsIcons[o].x1} 1x, ${s.bookShopsIcons[o].x2} 2x"\n            src="${s.bookShopsIcons[o].x1}"\n            alt="${e}" \n            width="${s.bookShopsIcons[o].width}" \n            height="${s.bookShopsIcons[o].height}"\n            class="stores-img${o?"":"__amazon"}">\n        </a>\n      </li>`)).join("")}</ul>\n          </div>\n        </div>\n        <div class="pop-up__btn">\n        <button class="action-button pop-up__action-button js-add-storage">${c}</button>\n        <p class="pop-up__congratulations">Congratulations! You have added the book to the shopping list. To delete, press the button “Remove from the shopping list”.</p>\n        </div>\n        <button class="js-popup-close close-button" type="button">\n          <img src="${new URL(o("abjTm"))}" width="24" height="24">\n        </button>\n      </div>`;var l}})),o.register("a1pCD",(function(n,s){e(n.exports,"bookShopsIcons",(function(){return u}));var r=o("kSibX"),i=o("2iOZk"),a=o("8zDEN"),c=o("3KaUB"),l=o("dZQ1Q"),p=o("8EpWk");const u=[{x1:t(r),x2:t(i),width:"62",height:"19"},{x1:t(a),x2:t(c),width:"33",height:"32"},{x1:t(l),x2:t(p),width:"38",height:"36"}]})),o.register("kSibX",(function(e,t){e.exports=new URL(o("kyEFX").resolve("1StS0"),import.meta.url).toString()})),o.register("2iOZk",(function(e,t){e.exports=new URL(o("kyEFX").resolve("igOR5"),import.meta.url).toString()})),o.register("8zDEN",(function(e,t){e.exports=new URL(o("kyEFX").resolve("cLJUC"),import.meta.url).toString()})),o.register("3KaUB",(function(e,t){e.exports=new URL(o("kyEFX").resolve("38YEC"),import.meta.url).toString()})),o.register("dZQ1Q",(function(e,t){e.exports=new URL(o("kyEFX").resolve("iYgR8"),import.meta.url).toString()})),o.register("8EpWk",(function(e,t){e.exports=new URL(o("kyEFX").resolve("kLMPf"),import.meta.url).toString()})),o.register("abjTm",(function(e,t){e.exports=new URL(o("kyEFX").resolve("d81E4"),import.meta.url).toString()}));
//# sourceMappingURL=popupModal.da27b14b.js.map
