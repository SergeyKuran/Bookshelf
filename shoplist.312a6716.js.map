{"mappings":"2MAAA,IAAAA,EAAAC,EAAA,S,oDAMA,MAAMC,EAAaC,SAASC,cAAc,sBACpCC,EAA0BF,SAASC,cAAc,mBACjDE,EAAgBH,SAASC,cAAc,kBACvCG,EAAYJ,SAASC,cAAc,eAGzC,IAAII,EAAWR,EAAAS,QAAmBC,KAAK,SACvC,MAAMC,EAAgBC,OAAOC,WAAa,IAAM,EAAI,EAE9CC,EAAY,IAAI,EAAAC,EAAAC,QACpBb,SAASC,cAAc,UACvB,kBA0BF,SAASa,IACPf,EAAWgB,UAAY,GACvBb,EAAwBc,UAAUC,IAAI,YACtCd,EAAce,MAAMC,aAAe,O,CASrC,SAASC,EAAcC,GACrB,MAAMC,EAAaD,EAAME,OAAOC,QAAQ,oBAClCC,EAASJ,EAAME,OAAOC,QAAQ,qBAEpC,IAAKF,EACH,OAGF,MAAMI,GAAW,EAAAC,EAAAC,cAAavB,EAAUG,GAQxC,GANAH,EAAWA,EAASwB,QAAOC,GAAQA,IAASL,EAAOM,QAAQC,KAE3DnC,EAAAS,QAAmB2B,KAxDI,QAwDmB5B,GAE1CiB,EAAWJ,MAAMgB,QAAU,OAEtB7B,EAAS8B,OAGP,CACL,MAAMC,EAAcT,EAAAU,WAAWC,iBAEzBC,EAAsD,IAArCb,EAASU,EAAc,GAAGD,OAAe,EAAI,EAEjD,IAAnBI,GAAuBZ,EAAAU,WAAWG,MAAMnC,EAAS8B,QAEjDR,EAAAU,WAAWI,WAAWL,EAAcG,GAEpClC,EAAS8B,QAAU3B,GACfJ,EAAUY,UAAUC,IAAI,W,MAZ5BH,G,CArDJH,EAAU+B,OAIVC,eAA2BC,GACzB,GAAIA,EAAKT,OAAQ,CA0BjBjC,EAAwBc,UAAU6B,OAAO,YACzC1C,EAAce,MAAMC,aAAe,GACnC2B,oBAAoB,QAAS1B,GAzB3B,MAAM2B,EAAcH,EAAKI,MAAM,EAAGxC,GAC5ByC,QAAiBF,EAAYG,KAAIP,MAAMX,IAC3C,MAAMmB,QAAaC,EAAA9C,QAAM+C,IACvB,6CAA6CrB,KAE/C,aAAamB,EAAKA,IAAI,IAElBG,SAAmBC,QAAQC,WAAWP,IAAWC,KAAIO,GAAMA,EAAGC,QACpE3D,EAAWgB,WAAY,EAAA4C,EAAArD,SAAoBgD,GAC3CvD,EAAW6D,iBAAiB,QAASxC,E,MAErCN,IAEFH,EAAUkD,M,CAnBZC,CAAYzD,E","sources":["src/js/shoplist.js"],"sourcesContent":["import localStoragemethod from '../js/storage-methods';\nimport axios from 'axios';\nimport { pagination, sliceOnGroup } from './pagination';\nimport markupBooksInBasket from './markupBooksInBasket';\nimport { Loader } from './loaderClass';\n\nconst bookListEl = document.querySelector('.shopinlist__cards');\nconst notificationContainerEl = document.querySelector('.shoplist__info');\nconst shoppingTitle = document.querySelector('.basket__title');\nconst container = document.querySelector('#pagination');\n\nconst LOCALSTORAGE_KEY = 'books';\nlet bookList = localStoragemethod.load('books');\nconst ITEM_PER_PAGE = window.innerWidth < 768 ? 4 : 3;\n\nconst preLoader = new Loader(\n  document.querySelector('header'),\n  'preloader-page'\n);\npreLoader.show();\n\nrenderBooks(bookList);\n\nasync function renderBooks(data) {\n  if (data.length) {\n    removeEmptyNotificationContainer();\n\n    const currentData = data.slice(0, ITEM_PER_PAGE);\n    const arrBooks = await currentData.map(async id => {\n      const data = await axios.get(\n        `https://books-backend.p.goit.global/books/${id}`\n      );\n      return await data.data;\n    });\n    const arrResult = (await Promise.allSettled(arrBooks)).map(el => el.value);\n    bookListEl.innerHTML = markupBooksInBasket(arrResult);\n    bookListEl.addEventListener('click', onBasketClick);\n  } else {\n    pasteEmptyNotificationContainer();\n  }\n  preLoader.hide();\n}\n\nfunction pasteEmptyNotificationContainer() {\n  bookListEl.innerHTML = '';\n  notificationContainerEl.classList.add('js-empty');\n  shoppingTitle.style.marginBottom = '140px';\n}\n\nfunction removeEmptyNotificationContainer() {\n  notificationContainerEl.classList.remove('js-empty');\n  shoppingTitle.style.marginBottom = '';\n  removeEventListener('click', onBasketClick);\n}\n\nfunction onBasketClick(event) {\n  const bntCloseEl = event.target.closest('.shopinlist__btn');\n  const cardEl = event.target.closest('.shopinlist__card');\n\n  if (!bntCloseEl) {\n    return;\n  }\n\n  const arrSlice = sliceOnGroup(bookList, ITEM_PER_PAGE);\n\n  bookList = bookList.filter(item => item !== cardEl.dataset.id);\n\n  localStoragemethod.save(LOCALSTORAGE_KEY, bookList);\n\n  bntCloseEl.style.display = 'none';\n\n  if (!bookList.length) {\n    pasteEmptyNotificationContainer();\n    return;\n  } else {\n    const currentPage = pagination.getCurrentPage();\n\n    const currentPageNum = arrSlice[currentPage - 1].length === 1 ? 1 : 0;\n\n    currentPageNum === 1 ? pagination.reset(bookList.length) : null;\n\n    pagination.movePageTo(currentPage - currentPageNum);\n\n    bookList.length <= ITEM_PER_PAGE\n      ? container.classList.add('disabled')\n      : null;\n  }\n}\n"],"names":["$4PVUM","parcelRequire","$ff584b7a283f130a$var$bookListEl","document","querySelector","$ff584b7a283f130a$var$notificationContainerEl","$ff584b7a283f130a$var$shoppingTitle","$ff584b7a283f130a$var$container","$ff584b7a283f130a$var$bookList","default","load","$ff584b7a283f130a$var$ITEM_PER_PAGE","window","innerWidth","$ff584b7a283f130a$var$preLoader","$7StVb","Loader","$ff584b7a283f130a$var$pasteEmptyNotificationContainer","innerHTML","classList","add","style","marginBottom","$ff584b7a283f130a$var$onBasketClick","event","bntCloseEl","target","closest","cardEl","arrSlice","$2nhTy","sliceOnGroup","filter","item","dataset","id","save","display","length","currentPage","pagination","getCurrentPage","currentPageNum","reset","movePageTo","show","async","data1","remove","removeEventListener","currentData","slice","arrBooks","map","data","$2shzp","get","arrResult","Promise","allSettled","el","value","$2ck0o","addEventListener","hide","$ff584b7a283f130a$var$renderBooks"],"version":3,"file":"shoplist.312a6716.js.map"}