function e(e,t,o,n){Object.defineProperty(e,t,{get:o,set:n,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var o=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequired7c6;o.register("100X1",(function(e,t){var n=o("2OfAl"),s=o("bja6l");const r=new(0,n.AxiosApi),i="books",a=document.querySelector("html"),l=document.createElement("div");l.classList.add("backdrop");const c=document.querySelector(".js-all-books");let p=JSON.parse(localStorage.getItem(i))||[],d=null;const u=()=>{try{return JSON.parse(localStorage.getItem(i))??[]}catch(e){return console.error(e),[]}},g=e=>{"Escape"===e.key&&(document.body.removeChild(l),a.classList.remove("scrollable"),document.removeEventListener("keydown",g))};function m(e){e.target&&(document.body.removeChild(l),a.classList.remove("scrollable"),document.removeEventListener("keydown",g))}function h(e){e.target.classList.contains("backdrop")&&(document.body.removeChild(l),a.classList.remove("scrollable"),document.removeEventListener("keydown",g))}function f(e){return u().includes(e)}c.addEventListener("click",(async function(e){if(!e.target.parentElement.classList.contains("js-book"))return;d=e.target.parentElement.dataset.id,document.addEventListener("keydown",g);let t=f(d)?"REMOVE FROM THE SHOPPING LIST":"ADD TO SHOPPING LIST";try{const e=(await r.getShops(d)).data;l.innerHTML=(0,s.createPopupCard)(e,t);let o=l.querySelector(".pop-up__congratulations");f(d)?o.classList.remove("hidden"):o.classList.add("hidden"),document.body.appendChild(l),a.classList.add("scrollable");l.querySelector(".js-add-storage").addEventListener("click",(e=>{!function(e,t){t.target.blur();const o=l.querySelector(".pop-up__congratulations");if(f(e))return o.classList.add("hidden"),n=e,p=u().filter((e=>e!==n)),localStorage.setItem(i,JSON.stringify(p)),void(t.target.textContent="ADD TO SHOPPING LIST");o.classList.remove("hidden"),p.push(e),localStorage.setItem(i,JSON.stringify(p)),t.target.textContent="REMOVE FROM THE SHOPPING LIST";var n}(d,e)}));l.querySelector(".js-popup-close").addEventListener("click",m),l.addEventListener("click",h)}catch(e){console.log(e)}}))})),o.register("2OfAl",(function(t,n){e(t.exports,"AxiosApi",(function(){return r}));var s=o("2shzp");class r{#e="https://books-backend.p.goit.global/books/";async getShops(e){const t=`${this.#e}${e}`;return await s.default.get(t)}}})),o.register("bja6l",(function(t,n){e(t.exports,"createPopupCard",(function(){return i}));var s=o("a1pCD");const r=["Amazon","Apple Books","Bookshop"];function i({author:e,book_image:t,title:n,buy_links:i,description:a},l){return`\n      <div class="pop-up scrollable">\n        <div class="pop-up__book-info">\n          <img class="pop-up__img" src="${t}" alt="${n}">\n          <div class="pop-up__description">\n            <h2 class="pop-up__book-name">${n}</h2>\n            <h2 class="pop-up__book-author">${e}</h2>\n            <p class="pop-up__review">${a||"Description"}</p>\n            <ul class="stores-list">${c=i,r.map((e=>c.find((({name:t})=>t===e)))).map((({name:e,url:t},o)=>`\n      <li class="stores-list__item">\n        <a href="${t}" target="_blank" rel="noopener noreferrer nofollow">\n          <img\n          srset = "${s.bookShopsIcons[o].x1} 1x, ${s.bookShopsIcons[o].x2} 2x"\n          src="${s.bookShopsIcons[o].x1},\n          alt="${e}" \n          width="${s.bookShopsIcons[o].width}" \n          height="${s.bookShopsIcons[o].height}"\n      class="stores-img${o?"":"__amazon"}" \n      )}">\n        </a>\n      </li>`)).join("")}</ul>\n          </div>\n        </div>\n        <div class="pop-up__btn">\n        <button class="action-button pop-up__action-button js-add-storage">${l}</button>\n        <p class="pop-up__congratulations">Congratulations! You have added the book to the shopping list. To delete, press the button “Remove from the shopping list”.</p>\n        </div>\n        <button class="js-popup-close close-button" type="button">\n          <img src="${new URL(o("abjTm"))}" width="24" height="24">\n        </button>\n      </div>`;var c}})),o.register("a1pCD",(function(n,s){e(n.exports,"bookShopsIcons",(function(){return d}));var r=o("kSibX"),i=o("2iOZk"),a=o("8zDEN"),l=o("3KaUB"),c=o("dZQ1Q"),p=o("8EpWk");const d=[{x1:new URL(t(r),"file:///src/data/shopsImages.js"),x2:new URL(t(i),"file:///src/data/shopsImages.js"),width:"62",height:"19"},{x1:new URL(t(a),"file:///src/data/shopsImages.js"),x2:new URL(t(l),"file:///src/data/shopsImages.js"),width:"33",height:"32"},{x1:new URL(t(c),"file:///src/data/shopsImages.js"),x1:new URL(t(p),"file:///src/data/shopsImages.js"),width:"38",height:"36"}]})),o.register("kSibX",(function(e,t){e.exports=new URL(o("kyEFX").resolve("1StS0"),import.meta.url).toString()})),o.register("2iOZk",(function(e,t){e.exports=new URL(o("kyEFX").resolve("igOR5"),import.meta.url).toString()})),o.register("8zDEN",(function(e,t){e.exports=new URL(o("kyEFX").resolve("cLJUC"),import.meta.url).toString()})),o.register("3KaUB",(function(e,t){e.exports=new URL(o("kyEFX").resolve("38YEC"),import.meta.url).toString()})),o.register("dZQ1Q",(function(e,t){e.exports=new URL(o("kyEFX").resolve("iYgR8"),import.meta.url).toString()})),o.register("8EpWk",(function(e,t){e.exports=new URL(o("kyEFX").resolve("kLMPf"),import.meta.url).toString()})),o.register("abjTm",(function(e,t){e.exports=new URL(o("kyEFX").resolve("d81E4"),import.meta.url).toString()}));
//# sourceMappingURL=popupModal.a0692a54.js.map
