!function(){function e(e){return e&&e.__esModule?e.default:e}var t=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequired7c6;t.register("5uR6A",(function(n,o){var r=t("bpxeT"),a=t("2TvXO"),s=t("5McxV");t("c5LOL");var i=new(0,s.AxiosApi),u="books",c=document.createElement("div"),l=document.querySelector(".js-all-books"),p=[],d=null;function f(){return(f=e(r)(e(a).mark((function t(n){var o,r,s,u;return e(a).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.target.parentElement.classList.contains("js-book")){e.next=3;break}return e.abrupt("return");case 3:return d=n.target.parentElement.dataset.id,o=_(d)?"REMOVE FROM THE SHOPPING LIST":"ADD TO SHOPPING LIST",console.log(o),e.prev=6,e.next=9,i.getShops(d);case 9:r=e.sent,s=r.data,c.innerHTML=v(s),document.body.appendChild(c),u=c.querySelector(".js-add-storage"),console.dir(u),u.addEventListener("click",(function(e){g(d)})),c.querySelector(".js-popup-close").addEventListener("click",b),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(6),console.log(e.t0);case 23:case"end":return e.stop()}}),t,null,[[6,20]])})))).apply(this,arguments)}function v(e){var n,o,r=e.author,a=e.book_image,s=e.title,i=e.buy_links,u=(e.list_name,e.description);return'<div class="popup-backdrop">\n  <div class="js-popup popup__body">\n  <div class="popup__container">\n  <button  class="js-popup-close btn__close" type="button">\n    <img src="'.concat(new URL(t("42XSP")),'">\n    </button>\n    <div class="popup-book">\n    <div class="popup-book__thumb">\n        <img class="popup-book__img" src="').concat(a,'" alt="').concat(s,'">\n        </div>\n    <div class="popup-book__info"\n        <h2>').concat(s,"</h2>\n        <h3>").concat(r,"</h3>\n        <p>").concat(u,'</p>\n        <ul class="modal__shops-link">').concat((n=i.filter((function(e){var t=e.name;return"Amazon"===t||"Apple Books"===t||"Bookshop"===t})),o=n.map((function(e){var t=e.name,n=e.url;return'  <li>\n                <a href="'.concat(n,'" target="_blank" rel="noopener noreferrer nofollow">\n                    <img src="" alt="').concat(t,'">\n                </a>\n            </li>')})).join(""),o),'</ul>\n        </div>\n    </div>\n    <div>\n        <button type="button" class="action-button js-add-storage">add to shoping list</button>\n        <p class="popup__text">text</p>\n    </div>\n    </div>\n    </div>\n    </div>')}function b(e){e.target&&(document.body.removeChild(c),document.removeEventListener("keyup",m))}function g(e){if(_(e))return t=e,n=(n=JSON.parse(localStorage.getItem(u))).filter((function(e){return e!==t})),void localStorage.setItem(u,JSON.stringify(n));var t,n;p.push(e),localStorage.setItem(u,JSON.stringify(p)),console.log(p)}l.addEventListener("click",(function(e){return f.apply(this,arguments)}));var m=function(e){"Escape"===e.key&&(document.body.removeChild(c),document.removeEventListener("keyup",m))};function _(e){var t;return!!(p=null!==(t=JSON.parse(localStorage.getItem(u)))&&void 0!==t?t:[]).includes(e)}document.addEventListener("keydown",m)})),t.register("5McxV",(function(n,o){var r,a,s,i;r=n.exports,a="AxiosApi",s=function(){return g},Object.defineProperty(r,a,{get:s,set:i,enumerable:!0,configurable:!0});var u=t("bpxeT"),c=t("8MBJY"),l=t("4KMWL"),p=t("8MQK7"),d=t("a2hTj"),f=t("2TvXO"),v=t("dIxxU"),b=new WeakMap,g=function(){"use strict";function t(){e(c)(this,t),e(p)(this,b,{writable:!0,value:"https://books-backend.p.goit.global/books/"})}return e(d)(t,[{key:"getShops",value:function(t){var n=this;return e(u)(e(f).mark((function o(){var r,a;return e(f).wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return r="".concat(e(l)(n,b)).concat(t),o.next=3,v.default.get(r);case 3:return a=o.sent,o.abrupt("return",a);case 5:case"end":return o.stop()}}),o)})))()}}]),t}()})),t.register("4KMWL",(function(e,n){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){var n=o.default(e,t,"get");return r.default(e,n)};var o=a(t("1UHsN")),r=a(t("ffZzF"));function a(e){return e&&e.__esModule?e:{default:e}}})),t.register("1UHsN",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}})),t.register("ffZzF",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){return t.get?t.get.call(e):t.value}})),t.register("8MQK7",(function(e,n){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t,n){r.default(e,t),t.set(e,n)};var o,r=(o=t("5k7tO"))&&o.__esModule?o:{default:o}})),t.register("5k7tO",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}})),t.register("c5LOL",(function(e,t){})),t.register("42XSP",(function(e,n){e.exports=t("aNJCr").getBundleURL("6XpB3")+t("iE7OH").resolve("c4Fq2")}))}();
//# sourceMappingURL=popupModal.3b67546d.js.map
