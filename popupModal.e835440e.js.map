{"mappings":"sSAAA,IAAAA,EAAAC,EAAA,S,aAGA,MAAMC,EAAW,IAAI,EAAAF,EAAAG,UACfC,EAAmB,QACnBC,EAAaC,SAASC,cAAc,OAkF1C,SAASC,EAAQC,GACVA,EAAIC,QAGPJ,SAASK,KAAKC,YAAYP,E,CArFXC,SAASO,cAAc,iBAE/BC,iBAAiB,SAE5BC,eAAuBC,GACrB,MAAMC,EAASD,EAAEN,OAAOQ,cAAcC,QAAQC,GAE9C,IACE,MACMC,SADiBnB,EAASoB,SAASL,IACjBM,KAExBlB,EAAWmB,UAef,UAAyBC,OACvBA,EAAMC,WACNA,EAAUC,MACVA,EAAKC,UACLA,EAASC,UACTA,EAASC,YACTA,IAEA,MAAO,2ZAUmCJ,WAAoBC,uEAGlDA,uBACAF,sBACDK,gDAaYC,EAZ+BH,EAalCG,EACjBC,KACC,EAACC,KAAEA,EAAIC,IAAEA,KAAU,oCACEA,gGACYD,iDAIlCE,KAAK,4OATV,IAAyBJ,C,CAnDEK,CAAgBf,GACvCf,SAASK,KAAK0B,YAAYhC,GAEPA,EAAWQ,cAAc,mBAEjCC,iBAAiB,SA2DVwB,EA3DgCjB,EA4DpDkB,QAAQC,IAAIF,QAEZ,EAAAG,EAAAC,SAAmBtC,EAAkBkC,KA5DbjC,EAAWQ,cAAc,mBAEjCC,iBAAiB,QAASN,E,CACxC,MAAOmC,GACPJ,QAAQC,IAAIG,E,CAqDhB,IAAsBL,C,wFCjFtB,IAAAM,EAAA3C,EAAA,SAEO,MAAM4C,EACXC,GAAY,6CAEZ/B,eAAegC,GACb,MAAMb,EAAM,GAAGc,MAAKF,IAAYC,IAGhC,aADqBH,EAAAF,QAAMO,IAAIf,E,0FCCnCgB,EAT2B,CAACC,EAAKb,KAC/B,IACE,MAAMc,EAAeC,KAAKC,UAAUhB,GACpCiB,aAAaC,QAAQL,EAAKC,E,CAC1B,MAAOT,GACPJ,QAAQI,MAAM,oBAAqBA,EAAMc,Q","sources":["src/js/popup/popupModal.js","src/js/api/fetchBooks.js","src/js/popup/localStorageHandler.js"],"sourcesContent":["import { AxiosApi } from '../api/fetchBooks';\nimport saveStorageHandler from './localStorageHandler';\n\nconst axiosApi = new AxiosApi();\nconst LOCALSTORAGE_KEY = 'books';\nconst popupModal = document.createElement('div');\nconst chosenBook = document.querySelector('.js-all-books');\n\nchosenBook.addEventListener('click', onClick);\n\nasync function onClick(e) {\n  const idBook = e.target.parentElement.dataset.id;\n\n  try {\n    const responce = await axiosApi.getShops(idBook);\n    const nodeEl = responce.data;\n\n    popupModal.innerHTML = createPopupCard(nodeEl);\n    document.body.appendChild(popupModal);\n\n    const addHandler = popupModal.querySelector('.js-add-storage');\n\n    addHandler.addEventListener('click', addToCart(e, nodeEl));\n\n    const btnPopupClose = popupModal.querySelector('.js-popup-close');\n\n    btnPopupClose.addEventListener('click', onClose);\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nfunction createPopupCard({\n  author,\n  book_image,\n  title,\n  buy_links,\n  list_name,\n  description,\n}) {\n  return `<div class=\"popup-backdrop\">\n  <div class=\"js-popup popup__body\">\n  <div class=\"popup__container\">\n  <button  class=\"js-popup-close btn__close\" type=\"button\">\n        <svg width=\"16\" height=\"15\"></svg>\n        <use href=\"./images/sprite.svg#icon-x-close\"></use>\n        </svg>\n    </button>\n    <div class=\"popup-book\">\n    <div class=\"popup-book__thumb\">\n        <img class=\"popup-book__img\" src=\"${book_image}\" alt=\"${title}\">\n        </div>\n    <div class=\"popup-book__info\"\n        <h2>${title}</h2>\n        <h3>${author}</h3>\n        <p>${description}</p>\n        <ul class=\"modal__shops-link\">${createShopLinks(buy_links)}</ul>\n        </div>\n    </div>\n    <div>\n        <button type=\"button\" class=\"action-button js-add-storage\">add to shoping list</button>\n        <p class=\"popup__text\">text</p>\n    </div>\n    </div>\n    </div>\n    </div>`;\n}\n\nfunction createShopLinks(buyLinks) {\n  const markupShops = buyLinks\n    .map(\n      ({ name, url }) => `  <li>\n                <a href=\"${url}\" target=\"_blank\" rel=\"noopener noreferrer nofollow\">\n                    <img src=\"\" alt=\"${name}\">\n                </a>\n            </li>`\n    )\n    .join('');\n  return markupShops;\n}\n\nfunction addToCart(e, value) {\n  console.log(value);\n\n  saveStorageHandler(LOCALSTORAGE_KEY, value);\n}\n\nfunction onClose(evt) {\n  if (!evt.target) {\n    return;\n  } else {\n    document.body.removeChild(popupModal);\n  }\n}\n","import axios from 'axios';\n\nexport class AxiosApi {\n  #BASE_URL = 'https://books-backend.p.goit.global/books/';\n\n  async getShops(bookId) {\n    const url = `${this.#BASE_URL}${bookId}`;\n    // console.log(url);\n    const result = await axios.get(url);\n    return result;\n  }\n}\n","const saveStorageHandler = (key, value) => {\n  try {\n    const storageValue = JSON.stringify(value);\n    localStorage.setItem(key, storageValue);\n  } catch (error) {\n    console.error('Set state error: ', error.message);\n  }\n};\n\nexport default saveStorageHandler;\n"],"names":["$2OfAl","parcelRequire","$0ba687617202890c$var$axiosApi","AxiosApi","$0ba687617202890c$var$LOCALSTORAGE_KEY","$0ba687617202890c$var$popupModal","document","createElement","$0ba687617202890c$var$onClose","evt","target","body","removeChild","querySelector","addEventListener","async","e","idBook","parentElement","dataset","id","nodeEl","getShops","data","innerHTML","author","book_image","title","buy_links","list_name","description","buyLinks","map","name","url","join","$0ba687617202890c$var$createPopupCard","appendChild","value","console","log","$kH8nr","default","error","$2shzp","$20bc572dfdce3226$export$166206578d5f52f9","BASE_URL","bookId","this","get","$f10e525403978957$export$2e2bcd8739ae039","key","storageValue","JSON","stringify","localStorage","setItem","message"],"version":3,"file":"popupModal.e835440e.js.map"}