{"mappings":"2MAAA,IAAAA,EAAAC,EAAA,S,uCAMA,MAAMC,EAAaC,SAASC,cAAc,sBACpCC,EAA0BF,SAASC,cAAc,mBACjDE,EAAgBH,SAASC,cAAc,kBACvCG,EAAYJ,SAASC,cAAc,eAGzC,IAAII,EAAWR,EAAAS,QAAmBC,KAAK,SACvC,MAAMC,EAAgBC,OAAOC,WAAa,IAAM,EAAI,EAyBpD,SAASC,IACPZ,EAAWa,UAAY,GACvBV,EAAwBW,UAAUC,IAAI,YACtCX,EAAcY,MAAMC,aAAe,O,CAmBrC,SAASC,EAAcC,GACrB,MAAMC,EAASD,EAAMC,OAAOC,QAAQ,oBAC9BC,EAAKF,EAAOC,QAAQ,qBAE1B,IAAKD,EACH,OAGF,MAAMG,GAAW,EAAAC,EAAAC,cAAanB,EAAUG,GAExCH,EAAWA,EAASoB,QAAOC,GAAQA,IAASL,EAAGM,QAAQC,KAEvD/B,EAAAS,QAAmBuB,KA7DI,QA6DmBxB,GAC1CgB,EAAGN,MAAMe,QAAU,OAEsC,IAArDR,EAASC,EAAAQ,WAAWC,iBAAmB,GAAGC,OAC5CV,EAAAQ,WAAWG,WAAWX,EAAAQ,WAAWC,iBAAmB,GAEpDT,EAAAQ,WAAWG,WAAWX,EAAAQ,WAAWC,kBAG/B3B,EAAS4B,QAAUzB,GACrBJ,EAAUS,UAAUC,IAAI,YAGF,IAApBT,EAAS4B,QACXtB,G,EArEJwB,eAA2BC,GACzB,GAAIA,EAAKH,OAAQ,CA2BjB/B,EAAwBW,UAAUwB,OAAO,YACzClC,EAAcY,MAAMC,aAAe,GACnCsB,oBAAoB,QAASrB,GA1B3B,MAAMsB,EAAcH,EAAKI,MAAM,EAAGhC,GAE5BiC,QAAiBF,EAAYG,KAAIP,MAAMP,IAC3C,MAAMe,QAAaC,EAAAtC,QAAMuC,IACvB,6CAA6CjB,KAE/C,aAAae,EAAKA,IAAI,IAElBG,SAAmBC,QAAQC,WAAWP,IAAWC,KAAIO,GAAMA,EAAGC,QAEpEnD,EAAWa,WAAY,EAAAuC,EAAA7C,SAAoBwC,GAC3C/C,EAAWqD,iBAAiB,QAASnC,E,MAErCN,G,CAnBJ0C,CAAYhD,E","sources":["src/js/shoplist.js"],"sourcesContent":["import localStoragemethod from '../js/storage-methods';\nimport axios from 'axios';\nimport { pagination, sliceOnGroup } from './pagination';\n\nimport markupBooksInBasket from './markupBooksInBasket';\n\nconst bookListEl = document.querySelector('.shopinlist__cards');\nconst notificationContainerEl = document.querySelector('.shoplist__info');\nconst shoppingTitle = document.querySelector('.basket__title');\nconst container = document.querySelector('#pagination');\n\nconst LOCALSTORAGE_KEY = 'books';\nlet bookList = localStoragemethod.load('books');\nconst ITEM_PER_PAGE = window.innerWidth < 768 ? 4 : 3;\n\nrenderBooks(bookList);\n\nasync function renderBooks(data) {\n  if (data.length) {\n    removeEmptyNotificationContainer();\n\n    const currentData = data.slice(0, ITEM_PER_PAGE);\n\n    const arrBooks = await currentData.map(async id => {\n      const data = await axios.get(\n        `https://books-backend.p.goit.global/books/${id}`\n      );\n      return await data.data;\n    });\n    const arrResult = (await Promise.allSettled(arrBooks)).map(el => el.value);\n\n    bookListEl.innerHTML = markupBooksInBasket(arrResult);\n    bookListEl.addEventListener('click', onBasketClick);\n  } else {\n    pasteEmptyNotificationContainer();\n  }\n}\n\nfunction pasteEmptyNotificationContainer() {\n  bookListEl.innerHTML = '';\n  notificationContainerEl.classList.add('js-empty');\n  shoppingTitle.style.marginBottom = '140px';\n}\n\nfunction removeEmptyNotificationContainer() {\n  notificationContainerEl.classList.remove('js-empty');\n  shoppingTitle.style.marginBottom = '';\n  removeEventListener('click', onBasketClick);\n}\n\nfunction cutNameCategory(name) {\n  if (window.innerWidth <= 768) {\n    if (name.length > 20) {\n      return name.substring(0, 20) + '...';\n    }\n    return name;\n  }\n  return name;\n}\n\nfunction onBasketClick(event) {\n  const target = event.target.closest('.shopinlist__btn');\n  const li = target.closest('.shopinlist__card');\n\n  if (!target) {\n    return;\n  }\n\n  const arrSlice = sliceOnGroup(bookList, ITEM_PER_PAGE);\n\n  bookList = bookList.filter(item => item !== li.dataset.id);\n\n  localStoragemethod.save(LOCALSTORAGE_KEY, bookList);\n  li.style.display = 'none';\n\n  if (arrSlice[pagination.getCurrentPage() - 1].length === 1) {\n    pagination.movePageTo(pagination.getCurrentPage() - 1);\n  } else {\n    pagination.movePageTo(pagination.getCurrentPage());\n  }\n\n  if (bookList.length <= ITEM_PER_PAGE) {\n    container.classList.add('disabled');\n  }\n\n  if (bookList.length === 0) {\n    pasteEmptyNotificationContainer();\n  }\n}\n"],"names":["$4PVUM","parcelRequire","$ff584b7a283f130a$var$bookListEl","document","querySelector","$ff584b7a283f130a$var$notificationContainerEl","$ff584b7a283f130a$var$shoppingTitle","$ff584b7a283f130a$var$container","$ff584b7a283f130a$var$bookList","default","load","$ff584b7a283f130a$var$ITEM_PER_PAGE","window","innerWidth","$ff584b7a283f130a$var$pasteEmptyNotificationContainer","innerHTML","classList","add","style","marginBottom","$ff584b7a283f130a$var$onBasketClick","event","target","closest","li","arrSlice","$2nhTy","sliceOnGroup","filter","item","dataset","id","save","display","pagination","getCurrentPage","length","movePageTo","async","data1","remove","removeEventListener","currentData","slice","arrBooks","map","data","$2shzp","get","arrResult","Promise","allSettled","el","value","$2ck0o","addEventListener","$ff584b7a283f130a$var$renderBooks"],"version":3,"file":"shoplist.ef26ff56.js.map"}