{"mappings":"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","sources":["src/js/popup/popupModal.js","src/js/api/fetchBooks.js","<<jsx-config-pragma.js>>","node_modules/@swc/helpers/lib/_class_private_field_get.js","node_modules/@swc/helpers/lib/_class_extract_field_descriptor.js","node_modules/@swc/helpers/lib/_class_apply_descriptor_get.js","node_modules/@swc/helpers/lib/_class_private_field_init.js","node_modules/@swc/helpers/lib/_check_private_redeclaration.js","src/js/popup/localStorageHandler.js"],"sourcesContent":["import { AxiosApi } from '../api/fetchBooks';\nimport saveStorageHandler from './localStorageHandler';\n\nconst axiosApi = new AxiosApi();\nconst LOCALSTORAGE_KEY = 'books';\nconst popupModal = document.createElement('div');\nconst chosenBook = document.querySelector('.js-all-books');\n\nchosenBook.addEventListener('click', onClick);\n\nasync function onClick(e) {\n  const idBook = e.target.parentElement.dataset.id;\n\n  try {\n    const responce = await axiosApi.getShops(idBook);\n    const nodeEl = responce.data;\n\n    popupModal.innerHTML = createPopupCard(nodeEl);\n    document.body.appendChild(popupModal);\n\n    const addHandler = popupModal.querySelector('.js-add-storage');\n\n    addHandler.addEventListener('click', addToCart(e, nodeEl));\n\n    const btnPopupClose = popupModal.querySelector('.js-popup-close');\n\n    btnPopupClose.addEventListener('click', onClose);\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nfunction createPopupCard({\n  author,\n  book_image,\n  title,\n  buy_links,\n  list_name,\n  description,\n}) {\n  return `<div class=\"popup-backdrop\">\n  <div class=\"js-popup popup__body\">\n  <div class=\"popup__container\">\n  <button  class=\"js-popup-close btn__close\" type=\"button\">\n        <svg width=\"16\" height=\"15\"></svg>\n        <use href=\"./images/sprite.svg#icon-x-close\"></use>\n        </svg>\n    </button>\n    <div class=\"popup-book\">\n    <div class=\"popup-book__thumb\">\n        <img class=\"popup-book__img\" src=\"${book_image}\" alt=\"${title}\">\n        </div>\n    <div class=\"popup-book__info\"\n        <h2>${title}</h2>\n        <h3>${author}</h3>\n        <p>${description}</p>\n        <ul class=\"modal__shops-link\">${createShopLinks(buy_links)}</ul>\n        </div>\n    </div>\n    <div>\n        <button type=\"button\" class=\"action-button js-add-storage\">add to shoping list</button>\n        <p class=\"popup__text\">text</p>\n    </div>\n    </div>\n    </div>\n    </div>`;\n}\n\nfunction createShopLinks(buyLinks) {\n  const markupShops = buyLinks\n    .map(\n      ({ name, url }) => `  <li>\n                <a href=\"${url}\" target=\"_blank\" rel=\"noopener noreferrer nofollow\">\n                    <img src=\"\" alt=\"${name}\">\n                </a>\n            </li>`\n    )\n    .join('');\n  return markupShops;\n}\n\nfunction addToCart(e, value) {\n  console.log(value);\n\n  saveStorageHandler(LOCALSTORAGE_KEY, value);\n}\n\nfunction onClose(evt) {\n  if (!evt.target) {\n    return;\n  } else {\n    document.body.removeChild(popupModal);\n  }\n}\n","import axios from 'axios';\n\nexport class AxiosApi {\n  #BASE_URL = 'https://books-backend.p.goit.global/books/';\n\n  async getShops(bookId) {\n    const url = `${this.#BASE_URL}${bookId}`;\n    // console.log(url);\n    const result = await axios.get(url);\n    return result;\n  }\n}\n",null,"\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _classPrivateFieldGet;\nvar _classExtractFieldDescriptor = _interopRequireDefault(require(\"./_class_extract_field_descriptor\"));\nvar _classApplyDescriptorGet = _interopRequireDefault(require(\"./_class_apply_descriptor_get\"));\nfunction _classPrivateFieldGet(receiver, privateMap) {\n    var descriptor = (0, _classExtractFieldDescriptor).default(receiver, privateMap, \"get\");\n    return (0, _classApplyDescriptorGet).default(receiver, descriptor);\n}\nfunction _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n        default: obj\n    };\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _classExtractFieldDescriptor;\nfunction _classExtractFieldDescriptor(receiver, privateMap, action) {\n    if (!privateMap.has(receiver)) {\n        throw new TypeError(\"attempted to \" + action + \" private field on non-instance\");\n    }\n    return privateMap.get(receiver);\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _classApplyDescriptorGet;\nfunction _classApplyDescriptorGet(receiver, descriptor) {\n    if (descriptor.get) {\n        return descriptor.get.call(receiver);\n    }\n    return descriptor.value;\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _classPrivateFieldInit;\nvar _checkPrivateRedeclaration = _interopRequireDefault(require(\"./_check_private_redeclaration\"));\nfunction _classPrivateFieldInit(obj, privateMap, value) {\n    (0, _checkPrivateRedeclaration).default(obj, privateMap);\n    privateMap.set(obj, value);\n}\nfunction _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n        default: obj\n    };\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _checkPrivateRedeclaration;\nfunction _checkPrivateRedeclaration(obj, privateCollection) {\n    if (privateCollection.has(obj)) {\n        throw new TypeError(\"Cannot initialize the same private elements twice on an object\");\n    }\n}\n","const saveStorageHandler = (key, value) => {\n  try {\n    const storageValue = JSON.stringify(value);\n    localStorage.setItem(key, storageValue);\n  } catch (error) {\n    console.error('Set state error: ', error.message);\n  }\n};\n\nexport default saveStorageHandler;\n"],"names":["$bpxeT","parcelRequire","$4008f2abd9d9c4c1$var$axiosApi","$5McxV","AxiosApi","$4008f2abd9d9c4c1$var$popupModal","document","createElement","$4008f2abd9d9c4c1$var$_onClick","$parcel$interopDefault","$2TvXO","mark","_callee","e","idBook","responce","nodeEl","target","parentElement","dataset","id","getShops","_ctx","sent","data","innerHTML","$4008f2abd9d9c4c1$var$createPopupCard","body","appendChild","querySelector","addEventListener","$4008f2abd9d9c4c1$var$addToCart","$4008f2abd9d9c4c1$var$onClose","console","log","t0","apply","this","arguments","param","markupShops","author","book_image","title","buy_links","description","list_name","concat","map","name","url","join","value","$c5LOL","default","evt","removeChild","$434b2ad8bdbd2617$var$_BASE_URL","WeakMap","$434b2ad8bdbd2617$export$166206578d5f52f9","$8MQK7","key","bookId","result","$4KMWL","_this","$dIxxU","get","Object","defineProperty","module","exports","receiver","privateMap","descriptor","$37616d1d2d9e1de3$var$_classExtractFieldDescriptor","$37616d1d2d9e1de3$var$_classApplyDescriptorGet","$37616d1d2d9e1de3$var$_interopRequireDefault","obj","__esModule","action","has","TypeError","call","$665bb80dc57e205a$var$_checkPrivateRedeclaration","set","privateCollection","$8cdb0b47233094ec$export$2e2bcd8739ae039","storageValue","JSON","stringify","localStorage","setItem","error","message"],"version":3,"file":"popupModal.3ba46ce1.js.map"}